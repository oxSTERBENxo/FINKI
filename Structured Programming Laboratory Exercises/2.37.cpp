/*Од стандарден влез се чита цел број n. Потоа се вчитуваат n низи од цели броеви, при што за секоја прво се внесува должината на низата, а потоа сите елементи на низата, 
па на крај бројот k. Да се напише програма која за секоја низа ќе ја трансформира истата, т.ш. секој k-ти елемент прво ќе го помножи со неговиот реден број во низата,
потоа ќе го одземе неговиот следбеник. Доколку к-тиот елемент нема следбеник, се собира со неговиот претходник. На пример, ако е дадена следната низа:
1 2 3 4 5 6 7 8, за k=2 се добива 1 1 3 11 5 29 7 71
Да се испечатат сите трансформирани низи.*/

#include <iostream>
using namespace std;

void transform(int arr[], int n, int k) {
    for (int i = 0; i < n; ++i) {
        if ((i + 1) % k == 0) 
            if (i + 1 < n) {
                arr[i] = (i + 1) * arr[i] - arr[i + 1];
            } else {
                arr[i] = (i + 1) * arr[i] + arr[i - 1];
            }
        }
    }

int main() {
    int n;
    cin >> n;
    while (n--) {
        int length, arr[100], k;
        cin >> length;
        for (int i = 0; i < length; ++i) {
            cin >> arr[i];
        }
        cin >> k;
        transform(arr, length, k);
        for (int i = 0; i < length; ++i) {
            cout << arr[i];
            if (i < length - 1) {
                cout << " "; 
            }
        }
        cout << endl;
    }
    return 0;
}
